<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="" />
<meta name="author" content="" />
<link rel="icon" th:href="@{/favicon.ico}"  href="../static/favicon.ico" />

<title>Ingo's World</title>

<!-- Bootstrap core CSS -->
<link rel="stylesheet" type="text/css" th:href="@{/dist/css/bootstrap.min.css}" href="../static/dist/css/bootstrap.min.css" />

<!-- Custom styles for this template -->
<link rel="stylesheet" type="text/css" th:href="@{/starter-template.css}" href="../static/starter-template.css" />

<link rel="stylesheet" type="text/css" th:href="@{/dist/css/imgareaselect-default.css}" href="../static/dist/css/imgareaselect-default.css" />
<link rel="stylesheet" type="text/css" th:href="@{/dist/css/bootstrap-colorpicker.min.css}" href="../static/dist/css/bootstrap-colorpicker.min.css" />


<script th:src="@{/assets/js/ie-emulation-modes-warning.js}" src="../static/assets/js/ie-emulation-modes-warning.js"></script>


</head>


<body>
	<div th:include="fragments/navbar" th:remove="tag">
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">

				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed"
						data-toggle="collapse" data-target="#navbar" aria-expanded="false"
						aria-controls="navbar">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Project name</a>
				</div>
				<div id="navbar" class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Home</a></li>
						<li><a href="#about">About</a></li>
						<li><a href="#contact">Contact</a></li>
					</ul>
				</div>
				<!--/.nav-collapse -->
			</div>
		</nav>
	</div>

	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">Save this Mandelbrot Set</h4>
				</div>
				<div class="modal-body">
					<form id="save-form">
						<div class="form-group">
							<label for="nameInput">Name</label> <input
								type="text" class="form-control" id="nameInput"
								placeholder="Name" required="required"/>
						</div>
						<div class="form-group">
							<label for="descriptionTextarea">Description</label><textarea id="descriptionTextarea" 
									class="form-control" rows="3" 
									placeholder="Enter a description for this fractal image..."></textarea>
						</div>

					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					<button type="submit" id="save-modal-submit" form="fractal-form"  formaction="../mandelbrot/save" th:formaction="@{/mandelbrot/save}" class="btn btn-primary">Save</button>
				</div>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="col-xs-12" style="height:20px;"></div>
				
		<div class="row">
			<div class="col-md-6" >
				<img id="zoom_01" class="img-responsive" src="../static/mandelbrot.png"
					th:attr="src=@{/getMandelbrotImage(imgId=${fractal.imageUUID})}" />
			</div>
			<div class="col-md-4" >

				<div class="panel panel-default">
					<div class="panel-body">

						<form id="fractal-form" class="form-horizontal" method="get">
							<input type="hidden" id="nameHidden" name="name" th:attr="value=${fractal.name}"/>
							<input type="hidden" id="descriptionHidden" name="description" th:attr="value=${fractal.description}"/>							
							<input type="hidden" id="imageUUIDHidden" name="imageUUID" th:attr="value=${fractal.imageUUID}"/>							
							<span id="colormap" class="btn btn-default col-md-12" style="cursor: default" >&nbsp;</span>

							<div class="form-group">
							</div>

							<div class="form-group">
								<label for="iterations" class="col-md-6 control-label">Color 1</label>
								<div class="col-md-6">
									<div class="input-group colorpicker-component colors">
										<input id="color1" name="color1" type="text" value="#000000" class="form-control" 
												th:attr="value=${fractal.color1}" /> 
										<span class="input-group-addon"><i style="background-color: #000000;"></i>
										</span>
									</div>
								</div>
							<div class="form-group">
							</div>
								<label for="iterations" class="col-md-6 control-label">Color 2</label>
								<div class="col-md-6">
									<div class="input-group colorpicker-component colors">
										<input id="color2" name="color2" type="text" value="#00AABB" class="form-control" 
												th:attr="value=${fractal.color2}" /> 
										<span class="input-group-addon"><i style="background-color: #00AABB;"></i>
										</span>
									</div>
								</div>
							</div>
							
							<div class="form-group">							
								<label for="iterations" class="col-md-6 control-label">Color 3</label>
								<div class="col-md-6">
									<div class="input-group colorpicker-component colors">
										<input id="color3" name="color3" type="text" value="#FFFFFF" class="form-control col-md-6"
												th:attr="value=${fractal.color3}" />
										<span class="input-group-addon"><i style="background-color: #FFFFFF;"></i>
										</span>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label for="iterations" class="col-md-6 control-label">Iterations</label>
								<div class="col-md-6">
									<input type="text" class="form-control" id="iterations"
										name="iterations" placeholder="100"
										th:attr="value=${fractal.iterations}" />
								</div>
							</div>
							<div class="form-group">
								<label for="x1" class="col-md-6 control-label">C<sub>0</sub></label>
								<div class="col-md-6">
									<input type="text" class="form-control" id="c0" name="c0"
										th:attr="value=${fractal.c0}" value="-1.5" />
								</div>
							</div>
							<div class="form-group">
								<label for="y1" class="col-md-6 control-label">C<sub>0</sub> i</label>
								<div class="col-md-6">
									<input type="text" class="form-control" id="c0i" name="c0i"
										th:attr="value=${fractal.c0i}" value="-1" />
								</div>
							</div>
							<div class="form-group">
								<label for="x2" class="col-md-6 control-label">C<sub>1</sub></label>
								<div class="col-md-6">
									<input type="text" class="form-control" id="c1" name="c1"
										th:attr="value=${fractal.c1}" value="0.5"  />
								</div>
							</div>
							<div class="form-group">
								<label for="y2" class="col-md-6 control-label">C<sub>1</sub> i</label>
								<div class="col-md-6">
									<input type="text" class="form-control" id="c1i" name="c1i"
										th:attr="value=${fractal.c1i}" value="1"  />
								</div>
							</div>
							<div class="btn-toolbar">
								<button type="submit" class="btn btn-primary col-md-3 pull-right">Submit</button>
								<button type="submit" form="formreset" class="btn btn-default col-md-3 pull-right">Reset</button>
								<a href="#myModal" role="button" class="btn btn-default col-md-3 pull-right" data-toggle="modal">Save</a>

							</div>
						</form>
						<form method="get" id="formreset">
							<input type="hidden" name="reset" value="true"/>
						</form>
					</div>
				</div>

			</div>
		</div>

	</div>
	<!-- /.container -->



	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script th:src="@{/js/jquery.min.js}" src="../static/js/jquery.min.js"></script>

	<script th:inline="javascript">
	/*<![CDATA[*/
	$(document).ready(function() {
		$('#save-modal-submit').click(function() {
			if ($('#nameInput').val() === "") {
				return false;
			} else {
				 $('#nameHidden').val($('#nameInput').val());
				 $('#descriptionHidden').val($('#descriptionTextarea').val());
			}
		});
	});
	/*]]>*/
	</script>


	<script th:src="@{/js/jquery.imgareaselect.dev.js }" type="text/javascript" src="../static/js/jquery.imgareaselect.dev.js"></script>
	<script th:inline="javascript">
	/*<![CDATA[*/
	$(document).ready(function () {
		$('#zoom_01').imgAreaSelect({ 
			aspectRatio: '1:1', 
			handles: true,
			onSelectEnd: function (img, selection) {
				var oldC0  = /*[[${fractal.c0}]]*/  -1.5; 
				var oldC0i = /*[[${fractal.c0i}]]*/ -1; 
				var oldC1  = /*[[${fractal.c1}]]*/   0.5; 
				var oldC1i = /*[[${fractal.c1i}]]*/  1; 
		    	var fWidth = oldC1 - oldC0;
		    	var c0  = oldC0  + fWidth * selection.x1 / 500.0;
		    	var c0i = oldC0i + fWidth * selection.y1 / 500.0;
		    	var c1  = oldC0  + fWidth * selection.x2 / 500.0;
		    	var c1i = oldC0i + fWidth * selection.y2 / 500.0;
				$('input[name="c0"]').val(c0);
				$('input[name="c0i"]').val(c0i);
				$('input[name="c1"]').val(c1);
				$('input[name="c1i"]').val(c1i);
			}
		});
	});
	/*]]>*/
	</script>



	<script th:src="@{/dist/js/bootstrap.min.js}" src="../static/dist/js/bootstrap.min.js"></script>
	<script th:src="@{/dist/js/bootstrap-colorpicker.js}" src="../static/dist/js/bootstrap-colorpicker.js"></script>
	<script th:inline="javascript">
	/*<![CDATA[*/
	    $(function(){
	        $('.colors').colorpicker({format: 'hex'}).on('changeColor', function(event) {
                $('#colormap').css(	'background', 
                					'linear-gradient(to right, ' + $('#color1').val() + ', ' + $('#color2').val() + ', ' + $('#color3').val());
            });
               $('#colormap').css(	'background', 
            					'linear-gradient(to right, ' + $('#color1').val() + ', ' + $('#color2').val() + ', ' + $('#color3').val());
	    });
	/*]]>*/
	</script>
	
	<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	<script th:src="@{/assets/js/ie-emulation-modes-warning.js}" src="../static/assets/js/ie-emulation-modes-warning.js"></script>	
</body>
</html>
